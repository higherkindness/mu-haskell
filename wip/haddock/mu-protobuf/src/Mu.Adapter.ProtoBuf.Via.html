<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# language DataKinds             #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# language FlexibleContexts      #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# language FlexibleInstances     #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# language MultiParamTypeClasses #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# language PolyKinds             #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# language ScopedTypeVariables   #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# language TypeApplications      #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# language UndecidableInstances  #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-#&#160;OPTIONS_GHC -fno-warn-simplifiable-class-constraints -fno-warn-orphans #-}</span><span>
</span><span id="line-10"></span><span class="hs-comment">{-|
Description : Wrappers to customize Protocol Buffers serialization

In order to interoperate with the @proto3-wire@ library,
we sometimes need an instance of 'Proto3WireEncoder'.
By using the wrappers in this module, such instances can
be obtained automatically if the type can be turned
into a 'Schema'.
-}</span><span>
</span><span id="line-19"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Mu.Adapter.ProtoBuf.Via</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.GRPC.HTTP2.Proto3Wire</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Proto3.Wire.Decode</span></span><span>            </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PBDec</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Proto3.Wire.Encode</span></span><span>            </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PBEnc</span></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.html"><span class="hs-identifier">Mu.Adapter.ProtoBuf</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Mu.Rpc</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Mu.Schema</span></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-comment">-- |&#160;Specifies that a type is turned into a Protocol Buffers</span><span>
</span><span id="line-30"></span><span class="hs-comment">--   message by using the schema as intermediate representation.</span><span>
</span><span id="line-31"></span><span class="hs-keyword">newtype</span><span> </span><span id="ViaToProtoBufTypeRef"><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ViaToProtoBufTypeRef"><span class="hs-identifier hs-var">ViaToProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679216002"><span class="annot"><a href="#local-6989586621679216002"><span class="hs-identifier hs-type">ref</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRef</span></span><span> </span><span id="local-6989586621679216003"><span class="annot"><a href="#local-6989586621679216003"><span class="hs-identifier hs-type hs-type">snm</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679216001"><span class="annot"><a href="#local-6989586621679216001"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ViaToProtoBufTypeRef"><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ViaToProtoBufTypeRef"><span class="hs-identifier hs-var">ViaToProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unViaToProtoBufTypeRef"><span class="annot"><span class="annottext">ViaToProtoBufTypeRef ref t -&gt; t
</span><a href="Mu.Adapter.ProtoBuf.Via.html#unViaToProtoBufTypeRef"><span class="hs-identifier hs-var hs-var">unViaToProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679216001"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- |&#160;Specifies that a type can be parsed from a Protocol Buffers</span><span>
</span><span id="line-34"></span><span class="hs-comment">--   message by using the schema as intermediate representation.</span><span>
</span><span id="line-35"></span><span class="hs-keyword">newtype</span><span> </span><span id="ViaFromProtoBufTypeRef"><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ViaFromProtoBufTypeRef"><span class="hs-identifier hs-var">ViaFromProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679215991"><span class="annot"><a href="#local-6989586621679215991"><span class="hs-identifier hs-type">ref</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRef</span></span><span> </span><span id="local-6989586621679215993"><span class="annot"><a href="#local-6989586621679215993"><span class="hs-identifier hs-type hs-type">snm</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679215992"><span class="annot"><a href="#local-6989586621679215992"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ViaFromProtoBufTypeRef"><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ViaFromProtoBufTypeRef"><span class="hs-identifier hs-var">ViaFromProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unViaFromProtoBufTypeRef"><span class="annot"><span class="annottext">ViaFromProtoBufTypeRef ref t -&gt; t
</span><a href="Mu.Adapter.ProtoBuf.Via.html#unViaFromProtoBufTypeRef"><span class="hs-identifier hs-var hs-var">unViaFromProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679215992"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span id="local-6989586621679215932"><span id="local-6989586621679215933"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ToProtoBufTypeRef"><span class="hs-identifier hs-type">ToProtoBufTypeRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215933"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215932"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-39"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proto3WireEncoder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ViaToProtoBufTypeRef"><span class="hs-identifier hs-type">ViaToProtoBufTypeRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215933"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215932"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-40"></span><span>  </span><span id="local-6989586621679215928"><span class="annot"><span class="annottext">proto3WireEncode :: ViaToProtoBufTypeRef ref t -&gt; MessageBuilder
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">proto3WireEncode</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy ref -&gt; t -&gt; MessageBuilder
forall snm (ref :: TypeRef snm) t.
ToProtoBufTypeRef ref t =&gt;
Proxy ref -&gt; t -&gt; MessageBuilder
</span><a href="Mu.Adapter.ProtoBuf.Via.html#toProtoBufTypeRef"><span class="hs-identifier hs-var">toProtoBufTypeRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ref
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679215933"><span class="hs-identifier hs-type">ref</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; MessageBuilder)
-&gt; (ViaToProtoBufTypeRef ref t -&gt; t)
-&gt; ViaToProtoBufTypeRef ref t
-&gt; MessageBuilder
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ViaToProtoBufTypeRef ref t -&gt; t
forall snm (ref :: TypeRef snm) t. ViaToProtoBufTypeRef ref t -&gt; t
</span><a href="Mu.Adapter.ProtoBuf.Via.html#unViaToProtoBufTypeRef"><span class="hs-identifier hs-var hs-var">unViaToProtoBufTypeRef</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span id="local-6989586621679215923"><span class="annot"><span class="annottext">proto3WireDecode :: Parser RawMessage (ViaToProtoBufTypeRef ref t)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">proto3WireDecode</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Parser RawMessage (ViaToProtoBufTypeRef ref t)
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;this should never be called, use FromProtoBufTypeRef&quot;</span></span></span></span><span>
</span><span id="line-42"></span><span id="local-6989586621679215919"><span id="local-6989586621679215920"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#FromProtoBufTypeRef"><span class="hs-identifier hs-type">FromProtoBufTypeRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215920"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215919"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-43"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proto3WireEncoder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ViaFromProtoBufTypeRef"><span class="hs-identifier hs-type">ViaFromProtoBufTypeRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215920"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215919"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>  </span><span id="local-6989586621679215916"><span class="annot"><span class="annottext">proto3WireEncode :: ViaFromProtoBufTypeRef ref t -&gt; MessageBuilder
</span><a href="#local-6989586621679215916"><span class="hs-identifier hs-var hs-var hs-var hs-var">proto3WireEncode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ViaFromProtoBufTypeRef ref t -&gt; MessageBuilder
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;this should never be called, use ToProtoBufTypeRef&quot;</span></span><span>
</span><span id="line-45"></span><span>  </span><span id="local-6989586621679215915"><span class="annot"><span class="annottext">proto3WireDecode :: Parser RawMessage (ViaFromProtoBufTypeRef ref t)
</span><a href="#local-6989586621679215915"><span class="hs-identifier hs-var hs-var hs-var hs-var">proto3WireDecode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; ViaFromProtoBufTypeRef ref t
forall snm (ref :: TypeRef snm) t.
t -&gt; ViaFromProtoBufTypeRef ref t
</span><a href="Mu.Adapter.ProtoBuf.Via.html#ViaFromProtoBufTypeRef"><span class="hs-identifier hs-var">ViaFromProtoBufTypeRef</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; ViaFromProtoBufTypeRef ref t)
-&gt; Parser RawMessage t
-&gt; Parser RawMessage (ViaFromProtoBufTypeRef ref t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Proxy ref -&gt; Parser RawMessage t
forall snm (ref :: TypeRef snm) t.
FromProtoBufTypeRef ref t =&gt;
Proxy ref -&gt; Parser RawMessage t
</span><a href="Mu.Adapter.ProtoBuf.Via.html#fromProtoBufTypeRef"><span class="hs-identifier hs-var">fromProtoBufTypeRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ref
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679215920"><span class="hs-identifier hs-type">ref</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proto3WireEncoder</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-48"></span><span>  </span><span id="local-6989586621679215910"><span class="annot"><span class="annottext">proto3WireEncode :: () -&gt; MessageBuilder
</span><a href="#local-6989586621679215910"><span class="hs-identifier hs-var hs-var hs-var hs-var">proto3WireEncode</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MessageBuilder
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-49"></span><span>  </span><span id="local-6989586621679215909"><span class="annot"><span class="annottext">proto3WireDecode :: Parser RawMessage ()
</span><a href="#local-6989586621679215909"><span class="hs-identifier hs-var hs-var hs-var hs-var">proto3WireDecode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; Parser RawMessage ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-comment">-- | Types which can be parsed from a Protocol Buffers message.</span><span>
</span><span id="line-52"></span><span class="hs-keyword">class</span><span> </span><span id="FromProtoBufTypeRef"><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#FromProtoBufTypeRef"><span class="hs-identifier hs-var">FromProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679215986"><span class="annot"><a href="#local-6989586621679215986"><span class="hs-identifier hs-type">ref</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRef</span></span><span> </span><span id="local-6989586621679215987"><span class="annot"><a href="#local-6989586621679215987"><span class="hs-identifier hs-type hs-type">snm</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679215985"><span class="annot"><a href="#local-6989586621679215985"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-53"></span><span>  </span><span id="fromProtoBufTypeRef"><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#fromProtoBufTypeRef"><span class="hs-identifier hs-type">fromProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679215986"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBDec.Parser</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBDec.RawMessage</span></span><span> </span><span class="annot"><a href="#local-6989586621679215985"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | Types which can be turned into a Protocol Buffers message.</span><span>
</span><span id="line-55"></span><span class="hs-keyword">class</span><span> </span><span id="ToProtoBufTypeRef"><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ToProtoBufTypeRef"><span class="hs-identifier hs-var">ToProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679216010"><span class="annot"><a href="#local-6989586621679216010"><span class="hs-identifier hs-type">ref</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRef</span></span><span> </span><span id="local-6989586621679216011"><span class="annot"><a href="#local-6989586621679216011"><span class="hs-identifier hs-type hs-type">snm</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679216009"><span class="annot"><a href="#local-6989586621679216009"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>  </span><span id="toProtoBufTypeRef"><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#toProtoBufTypeRef"><span class="hs-identifier hs-type">toProtoBufTypeRef</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679216010"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679216009"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBEnc.MessageBuilder</span></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span id="local-6989586621679215906"><span id="local-6989586621679215907"><span id="local-6989586621679215908"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.ProtoBuf.html#IsProtoSchema"><span class="hs-identifier hs-type">IsProtoSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215908"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215907"><span class="hs-identifier hs-type">sty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromSchema</span></span><span> </span><span class="annot"><a href="#local-6989586621679215908"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215907"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215906"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#FromProtoBufTypeRef"><span class="hs-identifier hs-type">FromProtoBufTypeRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">SchemaRef</span></span><span> </span><span class="annot"><a href="#local-6989586621679215908"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215907"><span class="hs-identifier hs-type">sty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679215906"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-60"></span><span>  </span><span id="local-6989586621679215903"><span class="annot"><span class="annottext">fromProtoBufTypeRef :: Proxy ('SchemaRef sch sty) -&gt; Parser RawMessage t
</span><a href="#local-6989586621679215903"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a (sty :: typeName).
(IsProtoSchema sch sty, FromSchema sch sty a) =&gt;
Parser RawMessage a
forall t f (sch :: Schema t f) a (sty :: t).
(IsProtoSchema sch sty, FromSchema sch sty a) =&gt;
Parser RawMessage a
</span><a href="Mu.Adapter.ProtoBuf.html#fromProtoViaSchema"><span class="hs-identifier hs-var">fromProtoViaSchema</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679215908"><span class="hs-identifier hs-type">sch</span></a></span></span></span></span><span>
</span><span id="line-61"></span><span id="local-6989586621679215899"><span id="local-6989586621679215900"><span id="local-6989586621679215901"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.ProtoBuf.html#IsProtoSchema"><span class="hs-identifier hs-type">IsProtoSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215901"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215900"><span class="hs-identifier hs-type">sty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToSchema</span></span><span> </span><span class="annot"><a href="#local-6989586621679215901"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215900"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215899"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ToProtoBufTypeRef"><span class="hs-identifier hs-type">ToProtoBufTypeRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">SchemaRef</span></span><span> </span><span class="annot"><a href="#local-6989586621679215901"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215900"><span class="hs-identifier hs-type">sty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679215899"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-63"></span><span>  </span><span id="local-6989586621679215896"><span class="annot"><span class="annottext">toProtoBufTypeRef :: Proxy ('SchemaRef sch sty) -&gt; t -&gt; MessageBuilder
</span><a href="#local-6989586621679215896"><span class="hs-identifier hs-var hs-var hs-var hs-var">toProtoBufTypeRef</span></a></span></span><span>   </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a (sty :: typeName).
(IsProtoSchema sch sty, ToSchema sch sty a) =&gt;
a -&gt; MessageBuilder
forall t f (sch :: Schema t f) a (sty :: t).
(IsProtoSchema sch sty, ToSchema sch sty a) =&gt;
a -&gt; MessageBuilder
</span><a href="Mu.Adapter.ProtoBuf.html#toProtoViaSchema"><span class="hs-identifier hs-var">toProtoViaSchema</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679215901"><span class="hs-identifier hs-type">sch</span></a></span></span></span></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span id="local-6989586621679215891"><span id="local-6989586621679215892"><span id="local-6989586621679215893"><span id="local-6989586621679215894"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.html#FromProtoBufRegistry"><span class="hs-identifier hs-type">FromProtoBufRegistry</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215894"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215893"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-66"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.html#IsProtoSchema"><span class="hs-identifier hs-type">IsProtoSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MappingRight</span></span><span> </span><span class="annot"><a href="#local-6989586621679215894"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215892"><span class="hs-identifier hs-type">last</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679215891"><span class="hs-identifier hs-type">sty</span></a></span><span>
</span><span id="line-67"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromSchema</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MappingRight</span></span><span> </span><span class="annot"><a href="#local-6989586621679215894"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215892"><span class="hs-identifier hs-type">last</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679215891"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215893"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#FromProtoBufTypeRef"><span class="hs-identifier hs-type">FromProtoBufTypeRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">RegistryRef</span></span><span> </span><span class="annot"><a href="#local-6989586621679215894"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215893"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215892"><span class="hs-identifier hs-type">last</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679215893"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621679215889"><span class="annot"><span class="annottext">fromProtoBufTypeRef :: Proxy ('RegistryRef r t last) -&gt; Parser RawMessage t
</span><a href="#local-6989586621679215889"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromProtoBufTypeRef</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (r :: Mappings Nat Schema') t.
FromProtoBufRegistry r t =&gt;
Parser RawMessage t
forall t. FromProtoBufRegistry r t =&gt; Parser RawMessage t
</span><a href="Mu.Adapter.ProtoBuf.html#fromProtoBufWithRegistry"><span class="hs-identifier hs-var">fromProtoBufWithRegistry</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679215894"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-70"></span><span id="local-6989586621679215884"><span id="local-6989586621679215885"><span id="local-6989586621679215886"><span id="local-6989586621679215887"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.html#FromProtoBufRegistry"><span class="hs-identifier hs-type">FromProtoBufRegistry</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215887"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215886"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-71"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.html#IsProtoSchema"><span class="hs-identifier hs-type">IsProtoSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MappingRight</span></span><span> </span><span class="annot"><a href="#local-6989586621679215887"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215885"><span class="hs-identifier hs-type">last</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679215884"><span class="hs-identifier hs-type">sty</span></a></span><span>
</span><span id="line-72"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToSchema</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MappingRight</span></span><span> </span><span class="annot"><a href="#local-6989586621679215887"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215885"><span class="hs-identifier hs-type">last</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679215884"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215886"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.ProtoBuf.Via.html#ToProtoBufTypeRef"><span class="hs-identifier hs-type">ToProtoBufTypeRef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">RegistryRef</span></span><span> </span><span class="annot"><a href="#local-6989586621679215887"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215886"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215885"><span class="hs-identifier hs-type">last</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679215886"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-74"></span><span>  </span><span id="local-6989586621679215882"><span class="annot"><span class="annottext">toProtoBufTypeRef :: Proxy ('RegistryRef r t last) -&gt; t -&gt; MessageBuilder
</span><a href="#local-6989586621679215882"><span class="hs-identifier hs-var hs-var hs-var hs-var">toProtoBufTypeRef</span></a></span></span><span>   </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t f (sch :: Schema t f) a (sty :: t).
(IsProtoSchema sch sty, ToSchema sch sty a) =&gt;
a -&gt; MessageBuilder
forall a (sty :: Symbol).
(IsProtoSchema (MappingRight r last) sty,
 ToSchema (MappingRight r last) sty a) =&gt;
a -&gt; MessageBuilder
</span><a href="Mu.Adapter.ProtoBuf.html#toProtoViaSchema"><span class="hs-identifier hs-var">toProtoViaSchema</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MappingRight</span></span><span> </span><span class="annot"><a href="#local-6989586621679215887"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679215885"><span class="hs-identifier hs-type">last</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-75"></span></pre></body></html>